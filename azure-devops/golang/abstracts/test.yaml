steps:
  - template: 'go1.25.0.yaml'

  - script: $(Scripts.Directory)/global/scripts/golang/test/run.sh
    displayName: 'Run Tests'

  - task: 'PublishTestResults@2'
    inputs:
      testResultsFormat: 'JUnit'
      testResultsFiles: '**/junit.xml'
    displayName: 'Publish JUnit XML Results'

  - task: 'PublishCodeCoverageResults@2'
    inputs:
      summaryFileLocation: 'cobertura.xml'
    displayName: 'Publish Cobertura XML Results'

  - task: 'PublishPipelineArtifact@1'
    inputs:
      artifactName: 'coverage'
      targetPath: "$(System.DefaultWorkingDirectory)/coverage.txt"
    displayName: 'Publish Coverage Files'
