steps:
  - task: JavaToolInstaller@0
    inputs:
      versionSpec: '17'
      jdkArchitectureOption: 'x64'
      jdkSourceOption: 'PreInstalled'
    displayName: 'Install JDK 17'

  - task: 'Cache@2'
    inputs:
      key: "$(Agent.JobName)|build.gradle"
      path: "$(Pipeline.Workspace)/.gradle/caches"
    displayName: 'Cache Gradle'
    continueOnError: true

  - script: |
      gradleHome=$(Pipeline.Workspace)/.gradle
      gradleProp=$gradleHome/gradle.properties

      mkdir -p $gradleHome
      touch $gradleProp

      echo "javaUsername=$(JAVA_USERNAME)" > $gradleProp
      echo "javaPassword=$(JAVA_PASSWORD)" >> $gradleProp
    displayName: 'Setup Gradle Home'
